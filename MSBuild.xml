<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Clean" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <BuildFolder>C:\Build\LightCore\</BuildFolder>
        <PublishFolder>C:\inetpub\wwwroot\LightCore\</PublishFolder>
        <ProjectName>LightCore</ProjectName>
    </PropertyGroup>

    <ItemGroup>
        <ProjectReferences Include="$(MSBuildProjectDirectory)\\LightCore\\LightCore.csproj" />
        <ProjectReferences Include="$(MSBuildProjectDirectory)\\LightCore.Tests\\LightCore.Tests.csproj" />
        <ProjectReferences Include="$(MSBuildProjectDirectory)\\LightCore.CommonServiceLocator\\LightCore.CommonServiceLocator.csproj" />
        <ProjectReferences Include="$(MSBuildProjectDirectory)\\LightCore.Configuration\\LightCore.Configuration.csproj" />
        <ProjectReferences Include="$(MSBuildProjectDirectory)\\LightCore.Integration.Web\\LightCore.Integration.Web.csproj" />
        <ProjectReferences Include="$(MSBuildProjectDirectory)\\LightCore.Integration.Web.Tests\\LightCore.Integration.Web.Tests.csproj" />
    </ItemGroup>

    <ItemGroup>
        <Cleanup  Include="**\Release\**" />
        <Cleanup Include="**\Debug\**" />
    </ItemGroup>

    <Target Name="Build">
        <MSBuild
          Projects="@(ProjectReferences)"
          Targets="Build"
          Properties="Configuration=Release;Optimize=true;DefineConstants=$(BuildTarget)" />
    </Target>
    <Target Name="Clean" DependsOnTargets="Build">
        <RemoveDir Directories="@Cleanup" />
    </Target>
</Project>